dataContractSpecification: 0.9.1
id: urn:datacontract:linx:customer
info:
  title: LINX Customer Objects
  version: 1.0.0
  description: A file that contains all nCino object for LINX Customer
  owner: Customer and Data Enablement
  contact:
    name: Dipika Padhi (Service Owner)
    email: dipika.padhi@bendigoadelaide.com.au
transferDetails:
  frequency: daily
  GCP: 
    description: Details of the DataSync VMWare server in GCP
    producerAsset: e.g. ben-cde-nonprod-dev-lakehouse-landing/LINX/SIEBEL.LINX__S_ASSET     
    GCPServiceAccount: e.g.linx.appflow@<project-id>.com.au    
  AWS:
    description: Details of the DataSync service in AWS
    targetConfiguration:
      targetS3: e.g. some-s3-name
      targetDataSyncname: e.g. some name
  dataSyncConfiguration:
    datasyncVMidentifier: e.g. some-identifier
processingWorkflow:
  description: Process of transferring files from GCP to AWS and loading into Salesforce via Appflow
  steps: >
    "Push file into GCS",
    "DataSync to pick up file and push to S3",
    "Appflow ingest file",
    "Load into Salesforce",
    "Archive in AWS S3"
models:
  customer_account:
    description: >
      Export from GCP Lakehouse Serve Layer of Customer-Account object 
    file:
      usage: >
        Appflow to use this file for both Initial and Daily Deltas as related to LINX Customer Accounts
      limitations: >
        Not suitable for real-time use cases.
        NP Data may not be used to identify individual customers.
      format: csv
      delimiter: ","
      tab: "\t"
      name: gcp_lakehouse_linx_customer_account_{seq_number}_{date}.csv
    fields:
      Name:
        type: string
      FinServ__Status__c:
        type: string
      Industry_Code__c:
        type: string
      ShippingAddress:
        type: string
      BillingAddress:
        type: string
      Operating_Address__c:
        type: string
      Primary_Country_Code__c:
        type: string
      Phone:
        type: string
      Secondary_Country_Code__c:
        type: string
      Secondary_Phone_Number__c:
        type: string
      cm_Email_Address__c:
        type: string
      LLC_BI__Branch__c:
        type: string
      External_Reference__c:
        type: string
      OIC_Number__c:
        type: string
      FirstName:
        type: string
      MiddleName:
        type: string
      LastName:
        type: string
      Suffix__pc:
        type: string
      PersonBirthdate:
        type: string
      PersonGenderIdentity:
        type: string
      PersonOtherPhone:
        type: string
      PersonEmail:
        type: string
      Employment_Status__c:
        type: string
      Verbal_Password__pc:
        type: string
      ANZSCO_Code__c:
        type: string
      FinServ__Age__pc:
        type: string
      FinServ__CustomerID__c:
        type: string
      PersonDoNotCall:
        type: string
      Do_Not_Call__c:
        type: string
      FinServ__KYCDate__c:
        type: string
      FinServ__KYCStatus__c:
        type: string
      ABN__c:
        type: string
      LLC_BI__Account_Review__c:
        type: string
      Australian_Company_Number__c:
        type: string
      FinServ__BranchCode__c:
        type: string
      LLC_BI__Comments__c:
        type: string
      Communication_Preference__c:
        type: string
      CreatedById:
        type: string
      Created_from_Lead__c:
        type: string
      FinServ__ReferredByContact__pc:
        type: string
      FinServ__ReferredByUser__c:
        type: string
      PersonLeadSource:
        type: string
      Lead_Source__c:
        type: string
      Marketing_Opt_Out__c:
        type: string
      FinServ__NextReview__c:
        type: string
      Bus_Mail_Addr__c:
        type: string
      Bus_Mail_Add_Same_as_Phya__c:
        type: string
      Preferred_Mailing_Address__c:
        type: string
      FinServ__PreferredName__pc:
        type: string
      LastModifiedDate:
        type: string
      ParentId:
        type: string
      LLC_BI__Established_Country__c:
        type: string
      Company_Registration_Number__c:
        type: string
      Institution_Code__c:
        type: string
      Registration_Date__C:
        type: string
      Registration_Number__c:
        type: string
      Organisation_Classificaton__c:
        type: string
      Entity_Type__pc:
        type: string
  account_to_account_relationship:
    description: >
      Export from GCP Lakehouse Serve Layer of Account to Account Relationship (AAR)
    file:
      usage: >
        Appflow to use this file for both Initial and Daily Deltas as related to LINX AAR
      limitations: >
        Not suitable for real-time use cases.
        NP Data may not be used to identify individual customers.
      format: csv
      delimiter: ","
      tab: "\t"
      name: gcp_lakehouse_linx_account_to_account_{seq_number}_{date}.csv
    fields:
      FinServ__Account__c:
        type: string
      FinServ__ExternalId__c:
        type: string
      FinServ__RelatedAccount__c:
        type: string
      FinServ__Role__c:
        type: string
# examples here of openapi spec reference definitions
# definitions:
  # order_id:
  #   domain: checkout
  #   name: order_id
  #   title: Order ID
  #   type: string
  #   description: An internal ID that identifies an order in the online shop.
  #   example: 243c25e5-a081-43a9-aeab-6d5d5b6cb5e2
  #   pii: true
  #   classification: restricted
examples:
  - type: csv # csv, json, yaml, custom
    model: customer_account
    data: |- # expressed as string or inline yaml or via "$ref: data.csv"
      {"Name":"ABC Investments Pty Ltd","FinServ__Status__c":"Registered Company","Industry_Code__c":"1913\tPolymer Foam Product Manufacturing","ShippingAddress":"C/ JACK SMITH 1 HARBOUR ESPLANADE DOCKLANDS VIC 3008","BillingAddress":"1 HARBOUR ESPLANADE DOCKLANDS VIC 3008 ","Operating_Address__c":"2 BOURKE STREET DOCKLANDS VIC 3008 ","Primary_Country_Code__c":"Australia (61)","Phone":"(03) 9876 5432","Secondary_Country_Code__c":"Australia (61)","Secondary_Phone_Number__c":"(03) 9876 1111","cm_Email_Address__c":"jack@beanstalk.com.au","LLC_BI__Branch__c":" ","External_Reference__c":"46737268","OIC_Number__c":"334","FirstName":"","MiddleName":"","LastName":"","Suffix__pc":"","PersonBirthdate":"","PersonGenderIdentity":"","PersonOtherPhone":"","PersonEmail":"","Employment_Status__c":"","Verbal_Password__pc":"","ANZSCO_Code__c":"3322 Banking","FinServ__Age__pc":"","FinServ__CustomerID__c":"000003A9-0591-433d-B354-5C74148F7EE0","PersonDoNotCall":"","Do_Not_Call__c":"N","FinServ__KYCDate__c":"","FinServ__KYCStatus__c":"","ABN__c":"25289699224","LLC_BI__Account_Review__c":"","Australian_Company_Number__c":"5308467","FinServ__BranchCode__c":"","LLC_BI__Comments__c":"","Communication_Preference__c":"","CreatedById":"","Created_from_Lead__c":"","FinServ__ReferredByContact__pc":"","FinServ__ReferredByUser__c":"","PersonLeadSource":"","Lead_Source__c":"","Marketing_Opt_Out__c":"N","FinServ__NextReview__c":" ","Bus_Mail_Addr__c":"","Bus_Mail_Add_Same_as_Phya__c":"","Preferred_Mailing_Address__c":"","FinServ__PreferredName__pc":"","LastModifiedDate":"19/08/2015","ParentId":"","LLC_BI__Established_Country__c":"","Tax_File_Number__c":"","Company_Registration_Number__c":"9876543","Institution_Code__c":"Non-Bank Financial Institution","Registration_Date__C":"6/08/2001","Registration_Number__c":"3670340","Organisation_Classificaton__c":"PTY LTD by Shares","Entity_Type__pc":"Complex"}
      {"Name":"","FinServ__Status__c":"","Industry_Code__c":"","ShippingAddress":"C/ JACK SMITH 1 HARBOUR ESPLANADE DOCKLANDS VIC 3008","BillingAddress":"1 HARBOUR ESPLANADE DOCKLANDS VIC 3008 ","Operating_Address__c":"","Primary_Country_Code__c":"Australia (61)","Phone":"","Secondary_Country_Code__c":"","Secondary_Phone_Number__c":"","cm_Email_Address__c":"","LLC_BI__Branch__c":"","External_Reference__c":"","OIC_Number__c":"","FirstName":"Jack","MiddleName":"Adam","LastName":"Smith","Suffix__pc":"Jnr","PersonBirthdate":"23/08/1956","PersonGenderIdentity":"Male","PersonOtherPhone":"0400001001","PersonEmail":"JackX@snailmail.com","Employment_Status__c":"","Verbal_Password__pc":"1000026","ANZSCO_Code__c":"3322 Banking","FinServ__Age__pc":"41","FinServ__CustomerID__c":"000003A9-0591-433d-B354-5C74148F7EE0","PersonDoNotCall":"","Do_Not_Call__c":"N","FinServ__KYCDate__c":"","FinServ__KYCStatus__c":"","ABN__c":"","LLC_BI__Account_Review__c":"","Australian_Company_Number__c":"","FinServ__BranchCode__c":"","LLC_BI__Comments__c":"","Communication_Preference__c":"","CreatedById":"","Created_from_Lead__c":"","FinServ__ReferredByContact__pc":"","FinServ__ReferredByUser__c":"","PersonLeadSource":"","Lead_Source__c":"","Marketing_Opt_Out__c":"N","FinServ__NextReview__c":"","Bus_Mail_Addr__c":"","Bus_Mail_Add_Same_as_Phya__c":"","Preferred_Mailing_Address__c":"","FinServ__PreferredName__pc":"","LastModifiedDate":"19/08/2015","ParentId":"","LLC_BI__Established_Country__c":"","Tax_File_Number__c":"","Company_Registration_Number__c":"","Institution_Code__c":"","Registration_Date__C":"","Registration_Number__c":"","Organisation_Classificaton__c":"","Entity_Type__pc":""}
      {"Name":"ABC Holding Pty Ltd","FinServ__Status__c":"","Industry_Code__c":"","ShippingAddress":"","BillingAddress":"","Operating_Address__c":"","Primary_Country_Code__c":"","Phone":"","Secondary_Country_Code__c":"","Secondary_Phone_Number__c":"","cm_Email_Address__c":"","LLC_BI__Branch__c":"","External_Reference__c":"999999","OIC_Number__c":"1-WVXQ","FirstName":"","MiddleName":"","LastName":"","Suffix__pc":"","PersonBirthdate":"","PersonGenderIdentity":"","PersonOtherPhone":"","PersonEmail":"","Employment_Status__c":"","Verbal_Password__pc":"","ANZSCO_Code__c":"","FinServ__Age__pc":"","FinServ__CustomerID__c":"000003A9-0591-433d-B354-5C74148F7EE0","PersonDoNotCall":"","Do_Not_Call__c":"","FinServ__KYCDate__c":"","FinServ__KYCStatus__c":"","ABN__c":"","LLC_BI__Account_Review__c":"","Australian_Company_Number__c":"","FinServ__BranchCode__c":"","LLC_BI__Comments__c":"","Communication_Preference__c":"","CreatedById":"","Created_from_Lead__c":"","FinServ__ReferredByContact__pc":"","FinServ__ReferredByUser__c":"","PersonLeadSource":"","Lead_Source__c":"","Marketing_Opt_Out__c":"","FinServ__NextReview__c":"","Bus_Mail_Addr__c":"","Bus_Mail_Add_Same_as_Phya__c":"","Preferred_Mailing_Address__c":"","FinServ__PreferredName__pc":"","LastModifiedDate":"19/08/2015","ParentId":"","LLC_BI__Established_Country__c":"","Tax_File_Number__c":"","Company_Registration_Number__c":"","Institution_Code__c":"","Registration_Date__C":"","Registration_Number__c":"","Organisation_Classificaton__c":"","Entity_Type__pc":""}
quality:
  type: SodaCL  # data quality check format: SodaCL, montecarlo, dbt-tests, custom
  specification: # expressed as string or inline yaml or via "$ref: checks.yaml"
    checks for customers:
      - freshness(order_timestamp) < 24h
      - row_count > 500000
      - duplicate_count(order_id) = 0
    checks for line_items:
      - row_count > 500000